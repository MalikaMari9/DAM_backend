# Fixes_2026-02-13

## Summary of Work
- Reviewed backend structure and verified configured environment.
- Generated and maintained a backend checklist with completion status.
- Ran backend tests and resolved Pydantic v2 deprecation warnings by migrating to `ConfigDict`.
- Added MongoDB (Health.IMHE) read-only integration in FastAPI.
- Added country-level IMHE aggregation endpoint for choropleth mapping.
- Added IMHE age-group listing endpoint for UI filters.
- Excluded low-coverage age groups (10-14, 15-19, All ages) in IMHE queries.
- Added IMHE sex listing endpoint for UI filters.
- Added IMHE cause listing endpoint for UI filters.
- Added IMHE trend endpoint for line chart.
- Built a Mongo validation script and produced a Health.IMHE report.

## Checkpoints Status
- Backend tests: **PASS** (4 tests)
- Mongo Health.IMHE validation: **PASS** (no missing fields, no duplicates, no invalid ranges)

## Files Added
- `backend/app/core/mongo.py`
- `backend/app/schemas/health_imhe_schema.py`
- `backend/app/repositories/health_imhe_repo.py`
- `backend/app/controllers/health_imhe_controller.py`
- `backend/app/routes/health_imhe.py`
- `MongoTest/health_imhe_validate.py`
- `MongoTest/health_imhe_report.json`

## Files Updated
- `backend/requirements.txt` (add `pymongo`)
- `backend/app/core/config.py` (Mongo settings)
- `backend/app/main.py` (register IMHE router)
- `backend/app/routes/health_imhe.py` (country-summary endpoint)
- `backend/app/repositories/health_imhe_repo.py` (aggregation)
- `backend/app/controllers/health_imhe_controller.py` (controller hookup)
- `backend/app/schemas/health_imhe_schema.py` (summary schema)
- `backend/app/routes/health_imhe.py` (ages endpoint)
- `backend/app/repositories/health_imhe_repo.py` (distinct ages)
- `backend/app/controllers/health_imhe_controller.py` (age controller)
- `backend/app/schemas/account_schema.py` (Pydantic v2 config)
- `backend/app/schemas/org_schema.py` (Pydantic v2 config)
- `backend/app/schemas/org_application_schema.py` (Pydantic v2 config)
- `backend/app/schemas/org_application_file_schema.py` (Pydantic v2 config)
- `backend/app/schemas/upload_schema.py` (Pydantic v2 config)
- `backend/BACKEND_CHECKLIST.md` (marked status)

## New Backend Endpoints (Public)
- `GET /health/imhe` (filters + pagination)
- `GET /health/imhe/summary`
- `GET /health/imhe/locations`

## Notes
- Required `.env` entries for Mongo:
  - `MONGO_URI=mongodb://localhost:27017`
  - `MONGO_DB_HEALTH=Health`
  - `MONGO_COLLECTION_IMHE=IMHE`
