# Fixes_2026-02-15

## Summary of Work
- Added OpenAQ pollution Mongo config (DB/collection) and accessor.
- Added public `/pollution/openaq` endpoint with required `year`, optional `country_name` and `pollutant`, and metric toggle (`value|avg|min|max|median`).
- Implemented trimmed payload with `metric_value` and descending sort by selected metric.
- Added OpenAQ schemas, controller, repository, and router registration.
- Added health IMHE country summary variant that includes OpenAQ PM2.5 coverage-weighted averages.
- Added OpenAQ trend endpoint for year-by-year pollution series.
- Added year_from/year_to support on IMHE trend endpoint.
- Made OpenAQ trend use coverage-weighted averages with coverage_percent >= 50.
- Added OpenAQ trend aggregation method toggle (weighted/unweighted/balanced/median).
- Unified country normalization for IMHE/OpenAQ via shared helper.
- Added generic `pollution_value` + `pollutant` to IMHE country summary with pollution (keeps `pollution_pm25` for compatibility).

## Checkpoints Status
- Backend tests: **NOT RUN**
- Manual smoke: **PENDING**

## Files Updated
- `app/core/config.py`
- `app/core/mongo.py`
- `app/routes/pollution_openaq.py`
- `app/routes/health_imhe.py`
- `app/controllers/pollution_openaq_controller.py`
- `app/repositories/pollution_openaq_repo.py`
- `app/core/country_normalize.py`
- `app/controllers/health_imhe_controller.py`
- `app/schemas/pollution_openaq_schema.py`
- `app/main.py`
- `app/controllers/health_imhe_controller.py`
- `app/schemas/health_imhe_schema.py`
- `app/routes/health_imhe.py`
- `app/routes/pollution_openaq.py`
- `app/schemas/pollution_openaq_schema.py`
- `app/controllers/pollution_openaq_controller.py`
- `app/repositories/pollution_openaq_repo.py`
